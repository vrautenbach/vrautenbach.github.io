{"version":3,"file":"index.e3bc3479.js","sources":["../../vite/modulepreload-polyfill","../../main.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","import './style.css';\nimport 'ol/ol.css';\nimport 'ol-layerswitcher/dist/ol-layerswitcher.css';\n\nimport { Map, View } from 'ol';\nimport TileLayer from 'ol/layer/Tile';\nimport LayerGroup from 'ol/layer/Group';\nimport LayerTile from 'ol/layer/Tile';\nimport OSM from 'ol/source/OSM';\nimport TileJSON from 'ol/source/OSM';\nimport MapboxVector from 'ol/layer/MapboxVector';\nimport Stamen from 'ol/source/Stamen';\nimport XYZ from 'ol/source/XYZ';\n\nimport LayerSwitcher from 'ol-layerswitcher';\nimport { BaseLayerOptions, GroupLayerOptions } from 'ol-layerswitcher';\n\n//import Circle from 'ol/geom/Circle';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport VectorLayer from 'ol/layer/Vector';\nimport VectorSource from 'ol/source/Vector';\nimport { Fill, Stroke, Style, Text, Icon } from 'ol/style';\nimport { Circle as CircleStyle } from 'ol/style';\n\nimport { DragBox, Select } from 'ol/interaction';\nimport { platformModifierKeyOnly } from 'ol/events/condition';\n\nimport Overlay from 'ol/Overlay';\nimport Geocoder from 'ol-geocoder';\n\n\nvar dataArray = [];\nconst infoBox = document.getElementById('info');\n\nfunction downloadCSVFile(csv_data) {\n\n  // Create CSV file object and feed\n  // our csv_data into it\n  var CSVFile = new Blob([csv_data], {\n      type: \"text/csv\"\n  });\n\n  // Create to temporary link to initiate\n  // download process\n  var temp_link = document.createElement('a');\n\n  // Download csv file\n  temp_link.download = \"SAJG_export.csv\";\n  var url = window.URL.createObjectURL(CSVFile);\n  temp_link.href = url;\n\n  // This link should not be displayed\n  temp_link.style.display = \"none\";\n  document.body.appendChild(temp_link);\n\n  // Automatically click the link to\n  // trigger download\n  temp_link.click();\n  document.body.removeChild(temp_link);\n}\n\n$(document).ready(function(){\n  $(\"#search-input\").on(\"keyup\", function() {\n    var value = $(this).val().toLowerCase();\n    $(\"#info-table tr\").filter(function() {\n      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)\n    });\n  });\n  // var rowCount = $('#info-table tr').length - 1;\n  // $('#lblName').text(rowCount + ' articles');\n});\n\n$(document).on(\"click\", \"#clear-button\", function () {\n  selectedFeatures.clear();\n  dataArray = [];\n  console.log(dataArray);\n  $('#info-table > tbody').html(\"\");\n  $(\"#info\").toggle();\n  $(\"#search-input\").toggle();\n  $(\"#clear-button\").toggle();\n  $(\"#tableToCSV\").toggle();\n  $(\"#myChart\").toggle();\n  document.querySelector('#search-input').value = '';\n});\n\n$(document).on(\"click\", \"#tableToCSV\", function () {\n    // Variable to store the final csv data\n    var csv_data = [];\n\n    // Get each row data\n    var rows = document.getElementsByTagName('tr');\n    for (var i = 0; i < rows.length; i++) {\n  \n        // Get each column data\n        var cols = rows[i].querySelectorAll('td,th');\n  \n        // Stores each csv row data\n        var csvrow = [];\n        for (var j = 0; j < cols.length; j++) {\n  \n            // Get the text data of each cell\n            // of a row and push it to csvrow\n            csvrow.push(cols[j].innerHTML);\n        }\n  \n        // Combine each column value with comma\n        csv_data.push(csvrow.join(\",\"));\n    }\n  \n    // Combine each row data with new line character\n    csv_data = csv_data.join('\\n');\n  \n    // Call this function to download csv file \n    downloadCSVFile(csv_data);\n});\n\nconst image = new CircleStyle({\n  radius: 6,\n  fill: new Fill({ color: '#fc8d59'}),\n  stroke: new Stroke({ color: '#f5f5f5', width: 1.5 }),\n});\n\nconst iconStyle = new Style({\n  image: new Icon({\n    anchor: [0.5, 46],\n    anchorXUnits: 'fraction',\n    anchorYUnits: 'pixels',\n    src: 'data/pin-24.png',\n  }),\n});\n\nconst style = new Style({\n  image: image,\n});\n\nconst vectorLayer = new VectorLayer({\n  source: new VectorSource({\n    url: 'https://vrautenbach.github.io/SAJG_2021_v3.geojson',\n    format: new GeoJSON(),\n  }),\n  style: function (feature) {\n    //style.getText().setText(feature.get('name'));\n    return style;\n  }\n});\n\nconst osm = new TileLayer({\n  title: 'OpenStreetMap',\n  type: 'base',\n  visible: true,\n  source: new OSM(),\n});\n\nconst hybrid = new TileLayer({\n  title: 'MapTiler Satellite Hybrid',\n  type: 'base',\n  visible: false,\n  source: new XYZ({\n    url: 'https://api.maptiler.com/maps/hybrid/256/{z}/{x}/{y}@2x.jpg?key=uBFqqVbfHTkiVSZLXuBJ' //this works',\n  }),\n});\n\nconst satellite = new TileLayer({\n  title: 'ArcGIS Satellite',\n  type: 'base',\n  visible: false,\n  source: new XYZ({\n    url: 'https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}' //this works',\n  }),\n});\n\nconst terrain = new TileLayer({\n  title: 'Stamen Terrain',\n  type: 'base',\n  visible: false,\n  source: new XYZ({\n    url: 'https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.jpg' //this works',\n  }),\n});\n\nconst baseMaps = new LayerGroup({\n  title: 'Basemaps',\n  layers: [satellite, hybrid, terrain, osm]\n});\n\nconst map = new Map({\n  target: 'map',\n  layers: [baseMaps, vectorLayer],\n  view: new View({\n    center: [0, 0],\n    zoom: 2,\n  })\n});\n\nconst layerSwitcher = new LayerSwitcher({\n  reverse: true,\n  groupSelectStyle: 'children'\n});\n\nmap.addControl(layerSwitcher);\n\n\nfunction findValueInArray(value, arr) {\n  var result = \"Doesn't exist\";\n\n  for (var i = 0; i < arr.length; i++) {\n    var name = arr[i];\n    if (name == value) {\n      result = 'Exist';\n      break;\n    }\n  }\n  return result;\n}\n\n// a normal select interaction to handle click\nconst select = new Select();\nmap.addInteraction(select);\n\nconst selectedFeatures = select.getFeatures();\n\n// a DragBox interaction used to select features by drawing boxes\nconst dragBox = new DragBox({\n  condition: platformModifierKeyOnly,\n});\n\nmap.addInteraction(dragBox);\n\ndragBox.on('boxend', function () {\n  var done = [];\n  var test = null;\n\n  const rotation = map.getView().getRotation();\n  const oblique = rotation % (Math.PI / 2) !== 0;\n  const candidateFeatures = oblique ? [] : selectedFeatures;\n  const extent = dragBox.getGeometry().getExtent();\n  vectorLayer.getSource().forEachFeatureInExtent(extent, function (feature) {\n    candidateFeatures.push(feature);\n  });\n\n  if (oblique) {\n    const anchor = [0, 0];\n    const geometry = dragBox.getGeometry().clone();\n    geometry.rotate(-rotation, anchor);\n    const extent = geometry.getExtent();\n    candidateFeatures.forEach(function (feature) {\n      const geometry = feature.getGeometry().clone();\n      geometry.rotate(-rotation, anchor);\n      if (geometry.intersectsExtent(extent)) {\n        selectedFeatures.push(feature);\n      }\n    });\n  }\n\n  for (var i = 0; i < dataArray.length; i++) {\n    test = dataArray[i].ID;\n  \n    if (findValueInArray(test, done) == \"Doesn't exist\") {\n\n      $('#info-table > tbody:last-child').append(\n        '<tr>'// need to change closing tag to an opening `<tr>` tag.\n        // + '<td>' + dataArray[i].ID + '</td>'\n        + '<td>' + dataArray[i].Title + '</td>'\n        + '<td>' + dataArray[i].Author + '</td>'\n        + '<td>' + dataArray[i].Keywords + '</td>'\n        //+ '<td><span class=\"more\">' + dataArray[i].Abstract + '</span></td>'\n        + '<td>' + dataArray[i].Abstract + '</td>'\n        + '<td>' + dataArray[i].Vol + '</td>'\n        + '<td>' + dataArray[i].Year + '</td>'\n        + '<td><a href=\"' + dataArray[i].Link + '\" target=\"_blank\">' + dataArray[i].Link + '</a></td>'\n        + '</tr>');\n    }\n    done.push(test);\n  }\n  // var rowCount = $('#info-table tr').length - 1;\n  // $('#lblName').text(rowCount + ' articles');\n  $(\"#info\").toggle();\n  $(\"#search-input\").toggle();\n  $(\"#clear-button\").toggle();\n  $(\"#tableToCSV\").toggle();\n\n  var result = dataArray.map(x => x.Keywords);\n  result = result.toString().toLowerCase().replace(/[&\\/\\\\#^+()$~%.'\":;,*?<>{}!@]/g, '');\n  testing(result);\n  $(\"#myChart\").toggle();\n});\n\n// clear selection when drawing a new box and when clicking on the map\ndragBox.on('boxstart', function () {\n  selectedFeatures.clear();\n  dataArray = [];\n  console.log(dataArray);\n  $('#info-table > tbody').html(\"\");\n});\n\nselectedFeatures.on(['add', 'remove'], function () {\n  //alert('feature added or removed');\n  const names = selectedFeatures.getArray().map(function (feature) {\n\n    dataArray.push({\n      // Address: feature.properties.Address,\n      Title: feature.get('Title'),\n      Author: feature.get('Author'),\n      Keywords: feature.get('Keywords'),\n      Abstract: feature.get('Abstract'),\n      Vol: feature.get('Vol'),\n      Year: feature.get('Year'),\n      Link: feature.get('Link'),\n      ID: feature.get('ObjectId')\n    });\n\n    return feature.get('ObjectId');\n\n  });\n  // if (names.length > 0) {\n  //   //infoBox.innerHTML = names.join(', ');\n  // } else {\n  //   infoBox.innerHTML = 'No points selected';\n  // }\n});\n\n// Instantiate with some options and add the Control\nconst geocoder = new Geocoder('nominatim', {\n  provider: 'osm',\n  lang: 'en',\n  placeholder: 'Search for ...',\n  limit: 5,\n  debug: false,\n  autoComplete: true,\n  keepOpen: true,\n  featureStyle: new CircleStyle({\n      radius: 6,\n      fill: new Fill({ color: '#000000'}),\n      stroke: new Stroke({ color: '#f5f5f5', width: 1.5 }),\n  }),\n});\n\nmap.addControl(geocoder);\n\ngeocoder.on('addresschosen', function(evt) {\n  console.info(evt);\n});\n\nfunction testing(text) {\n  //Creating the World Cloud\n  ZC.LICENSE = [\"569d52cefae586f634c54f86dc99e6a9\", \"b55b025e438fa8a98e32482b5f768ff5\"];\n  zingchart.MODULESDIR = 'https://cdn.zingchart.com/modules/';\n\n  var myConfig = {\n    type: 'wordcloud',\n    backgroundColor: '#1F6B75',\n    options: {\n      text: text,\n      minLength: 3,\n      //ignore: [\"America\", \"American\", \"Applause\", \"Because\", \"because\", \"could\", \"don’t\", \"people\", \"That’s\", \"that’s\", \"Their\", \"their\", \"there\", \"these\", \"thing\", \"those\", \"through\", \"We’re\", \"we’re\", \"where\", \"would\"],\n      maxItems: 25,\n      aspect: 'spiral',\n\n      colorType: 'color',\n      color: '#ffffff',\n\n      style: {\n        fontFamily: 'Crete Round',\n      }\n    }, \n  };\n\n  zingchart.render({\n    id: 'myChart',\n    data: myConfig,\n    height: '200px',\n    width: '100%'\n  });\n}"],"names":[],"mappings":"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"}